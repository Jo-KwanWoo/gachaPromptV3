# GPT V3 Device Registration System 테스트 가이드

## 🚀 서버 실행

### 1. 의존성 설치 및 서버 시작
```bash
cd gachaGptV3/device-registration-system
npm install
npm run start:dev
```

서버가 성공적으로 시작되면 다음과 같은 메시지가 표시됩니다:
```
🚀 Server running on http://localhost:3001
```

### 2. API 문서 확인
브라우저에서 다음 URL로 Swagger 문서를 확인할 수 있습니다:
- http://localhost:3001/api/docs

## 🧪 테스트 실행

### 방법 1: 서버 상태 체크 도구 사용
1. `gachaGptV3/server-check.html` 파일을 브라우저에서 열기
2. 서버 URL 확인 (기본값: http://localhost:3001)
3. "상태 확인" 버튼 클릭
4. 서버가 온라인이면 "테스트 실행" 버튼이 나타남
5. "테스트 실행" 버튼을 클릭하여 테스트 러너 열기

### 방법 2: 테스트 러너 직접 사용
1. `gachaGptV3/test-runner.html` 파일을 브라우저에서 열기
2. 서버 URL 설정 (기본값: http://localhost:3001)
3. 테스트 실행:
   - **모든 테스트 실행**: 전체 12개 테스트 케이스 실행
   - **성공 케이스만**: 정상 동작 테스트만 실행
   - **실패 케이스만**: 에러 처리 테스트만 실행

## 📋 테스트 케이스 목록

### ✅ 성공 케이스 (2개)
- **TC001**: 장치 등록 - 성공 케이스
- **TC005**: 장치 상태 조회 - 성공 케이스 (pending)

### ❌ 실패 케이스 (10개)
- **TC002**: 장치 등록 - 필수 필드 누락 (hardwareId)
- **TC003**: 장치 등록 - 잘못된 IP 주소
- **TC004**: 장치 등록 - 중복 등록
- **TC006**: 장치 상태 조회 - 존재하지 않는 장치
- **TC007**: 장치 승인 - 인증 없이 접근
- **TC008**: 장치 승인 - 잘못된 JWT 토큰
- **TC009**: 장치 거부 - 인증 없이 접근
- **TC010**: 장치 등록 - systemInfo 필드 누락
- **TC011**: 장치 등록 - 빈 문자열 hardwareId
- **TC012**: 장치 등록 - 잘못된 JSON 형식

## 🔧 GPT V3 특징

### 강점
- ✅ **최신 기술 스택**: AWS SDK v3, ULID 사용
- ✅ **보안 강화**: Helmet, CORS 설정
- ✅ **실용적 접근**: 미완성 부분 명시
- ✅ **CloudFormation**: 인프라 자동화

### 현재 제한사항
- ⚠️ **미완성 기능**: 일부 승인/거부 기능이 의도적으로 미구현
- ⚠️ **GSI3 필요**: deviceId 조회를 위한 추가 인덱스 필요
- ⚠️ **JWT 토큰**: 실제 토큰 생성 로직 필요

## 🎯 테스트 결과 해석

### 예상 결과
- **성공 케이스**: TC001, TC005가 통과해야 함
- **실패 케이스**: 대부분 400, 401, 404, 409 상태 코드 반환
- **미구현 기능**: TC007, TC008, TC009는 400 에러 (GSI3 필요 메시지)

### 정상 동작 확인
1. **장치 등록** (TC001): 201 상태 코드와 성공 메시지
2. **상태 조회** (TC005): 200 상태 코드와 pending 상태
3. **입력 검증**: 잘못된 입력에 대해 400 에러
4. **인증 확인**: 토큰 없이 접근 시 401 에러

## 🔍 디버깅 팁

### 서버 연결 실패 시
1. 서버가 실행 중인지 확인: `npm run start:dev`
2. 포트 번호 확인: 기본값 3001
3. CORS 설정 확인: 브라우저 개발자 도구 콘솔 확인

### 테스트 실패 시
1. **실제 응답** 섹션에서 서버 응답 확인
2. 브라우저 개발자 도구 Network 탭에서 요청/응답 상세 확인
3. 서버 콘솔에서 에러 로그 확인

## 🛠️ 추가 개발 가이드

GPT V3를 완성하려면:
1. **GSI3 인덱스** 추가 (deviceId 조회용)
2. **JWT 토큰 생성** 엔드포인트 추가
3. **승인/거부 로직** 완성
4. **실제 SQS 큐 생성** 구현